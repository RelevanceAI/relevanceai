<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>relevanceai.api.endpoints.search &mdash; Relevance AI 0.1.0 documentation</title>
      <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/graphviz.css" type="text/css" />
    <link rel="shortcut icon" href="../../../../_static/favicon.png"/>
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/doctools.js"></script>
    <script src="../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../../index.html" class="icon icon-home"> Relevance AI
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../relevanceai.api.batch.html">Batch Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../relevanceai.api.endpoints.html">Core Endpoints</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../relevanceai.visualise.html">Visualisations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../features.html">Python Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../autoapi/index.html">API Reference</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">Relevance AI</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../../../index.html">Module code</a> &raquo;</li>
          <li><a href="../../../relevanceai.html">relevanceai</a> &raquo;</li>
      <li>relevanceai.api.endpoints.search</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for relevanceai.api.endpoints.search</h1><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">relevanceai.base</span> <span class="kn">import</span> <span class="n">Base</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">List</span>

<div class="viewcode-block" id="Search"><a class="viewcode-back" href="../../../../relevanceai.api.endpoints.html#relevanceai.api.endpoints.search.Search">[docs]</a><span class="k">class</span> <span class="nc">Search</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">project</span><span class="p">,</span> <span class="n">api_key</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">project</span> <span class="o">=</span> <span class="n">project</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">api_key</span> <span class="o">=</span> <span class="n">api_key</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">project</span><span class="p">,</span> <span class="n">api_key</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_init_experiment_helper</span><span class="p">()</span>

<div class="viewcode-block" id="Search.vector"><a class="viewcode-back" href="../../../../relevanceai.api.endpoints.html#relevanceai.api.endpoints.search.Search.vector">[docs]</a>    <span class="k">def</span> <span class="nf">vector</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">dataset_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">multivector_query</span><span class="p">:</span> <span class="n">List</span><span class="p">,</span>
        <span class="n">positive_document_ids</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{},</span>
        <span class="n">negative_document_ids</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{},</span>
        <span class="n">vector_operation</span><span class="o">=</span><span class="s2">&quot;sum&quot;</span><span class="p">,</span>
        <span class="n">approximation_depth</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
        <span class="n">sum_fields</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<div class="viewcode-block" id="Search.project"><a class="viewcode-back" href="../../../../relevanceai.api.endpoints.html#relevanceai.api.endpoints.search.Search.project">[docs]</a>        <span class="n">page_size</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span></div>
<div class="viewcode-block" id="Search.api_key"><a class="viewcode-back" href="../../../../relevanceai.api.endpoints.html#relevanceai.api.endpoints.search.Search.api_key">[docs]</a>        <span class="n">page</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span></div>
<div class="viewcode-block" id="Search.config"><a class="viewcode-back" href="../../../../relevanceai.api.endpoints.html#relevanceai.api.endpoints.search.Search.config">[docs]</a>        <span class="n">similarity_metric</span><span class="o">=</span><span class="s2">&quot;cosine&quot;</span><span class="p">,</span></div>
        <span class="n">facets</span><span class="o">=</span><span class="p">[],</span>
        <span class="n">filters</span><span class="o">=</span><span class="p">[],</span>
        <span class="n">min_score</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
        <span class="n">select_fields</span><span class="o">=</span><span class="p">[],</span>
        <span class="n">include_vector</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">include_count</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">asc</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">keep_search_history</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">hundred_scale</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">search_history_id</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; </span>
<span class="sd">        Allows you to leverage vector similarity search to create a semantic search engine. Powerful features of VecDB vector search:</span>
<span class="sd">        </span>
<span class="sd">        1. Multivector search that allows you to search with multiple vectors and give each vector a different weight. e.g. Search with a product image vector and text description vector to find the most similar products by what it looks like and what its described to do. You can also give weightings of each vector field towards the search, e.g. image_vector_ weights 100%, whilst description_vector_ 50% \n</span>
<span class="sd">            An example of a simple multivector query:</span>

<span class="sd">            &gt;&gt;&gt; [</span>
<span class="sd">            &gt;&gt;&gt;     {&quot;vector&quot;: [0.12, 0.23, 0.34], &quot;fields&quot;: [&quot;name_vector_&quot;], &quot;alias&quot;:&quot;text&quot;},</span>
<span class="sd">            &gt;&gt;&gt;     {&quot;vector&quot;: [0.45, 0.56, 0.67], &quot;fields&quot;: [&quot;image_vector_&quot;], &quot;alias&quot;:&quot;image&quot;},</span>
<span class="sd">            &gt;&gt;&gt; ]</span>
<span class="sd">            </span>
<span class="sd">            An example of a weighted multivector query:</span>

<span class="sd">            &gt;&gt;&gt; [</span>
<span class="sd">            &gt;&gt;&gt;     {&quot;vector&quot;: [0.12, 0.23, 0.34], &quot;fields&quot;: {&quot;name_vector_&quot;:0.6}, &quot;alias&quot;:&quot;text&quot;},</span>
<span class="sd">            &gt;&gt;&gt;     {&quot;vector&quot;: [0.45, 0.56, 0.67], &quot;fields&quot;: {&quot;image_vector_&quot;0.4}, &quot;alias&quot;:&quot;image&quot;},</span>
<span class="sd">            &gt;&gt;&gt; ]</span>

<span class="sd">            An example of a weighted multivector query with multiple fields for each vector:</span>

<span class="sd">            &gt;&gt;&gt; [</span>
<span class="sd">            &gt;&gt;&gt;     {&quot;vector&quot;: [0.12, 0.23, 0.34], &quot;fields&quot;: {&quot;name_vector_&quot;:0.6, &quot;description_vector_&quot;:0.3}, &quot;alias&quot;:&quot;text&quot;},</span>
<span class="sd">            &gt;&gt;&gt;     {&quot;vector&quot;: [0.45, 0.56, 0.67], &quot;fields&quot;: {&quot;image_vector_&quot;0.4}, &quot;alias&quot;:&quot;image&quot;},</span>
<span class="sd">            &gt;&gt;&gt; ]</span>

<span class="sd">        2. Utilise faceted search with vector search. For information on how to apply facets/filters check out datasets.documents.get_where \n</span>
<span class="sd">        3. Sum Fields option to adjust whether you want multiple vectors to be combined in the scoring or compared in the scoring. e.g. image_vector_ + text_vector_ or image_vector_ vs text_vector_. \n</span>
<span class="sd">            When sum_fields=True:</span>

<span class="sd">            - Multi-vector search allows you to obtain search scores by taking the sum of these scores.</span>
<span class="sd">            - TextSearchScore + ImageSearchScore = SearchScore</span>
<span class="sd">            - We then rank by the new SearchScore, so for searching 1000 documents there will be 1000 search scores and results</span>

<span class="sd">            When sum_fields=False:</span>

<span class="sd">            - Multi vector search but not summing the score, instead including it in the comparison!</span>
<span class="sd">            - TextSearchScore = SearchScore1</span>
<span class="sd">            - ImagSearchScore = SearchScore2</span>
<span class="sd">            - We then rank by the 2 new SearchScore, so for searching 1000 documents there should be 2000 search scores and results.</span>

<span class="sd">        4. Personalization with positive and negative document ids.</span>

<span class="sd">            - For more information about the positive and negative document ids to personalize check out services.recommend.vector</span>
<span class="sd">        </span>
<span class="sd">        For more even more advanced configuration and customisation of vector search, reach out to us at dev@relevance.ai and learn about our new advanced_vector_search.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        dataset_id : string</span>
<span class="sd">            Unique name of dataset</span>
<span class="sd">        multivector_query : list</span>
<span class="sd">            Query for advance search that allows for multiple vector and field querying.</span>
<span class="sd">        positive_document_ids : dict</span>
<span class="sd">            Positive document IDs to personalize the results with, this will retrive the vectors from the document IDs and consider it in the operation.</span>
<span class="sd">        negative_document_ids: dict</span>
<span class="sd">            Negative document IDs to personalize the results with, this will retrive the vectors from the document IDs and consider it in the operation.</span>
<span class="sd">        approximation_depth: int</span>
<span class="sd">            Used for approximate search to speed up search. The higher the number, faster the search but potentially less accurate.</span>
<span class="sd">        vector_operation: string</span>
<span class="sd">            Aggregation for the vectors when using positive and negative document IDs, choose from [&#39;mean&#39;, &#39;sum&#39;, &#39;min&#39;, &#39;max&#39;, &#39;divide&#39;, &#39;mulitple&#39;]</span>
<span class="sd">        sum_fields : bool</span>
<span class="sd">            Whether to sum the multiple vectors similarity search score as 1 or seperate</span>
<span class="sd">        page_size: int</span>
<span class="sd">            Size of each page of results</span>
<span class="sd">        page: int</span>
<span class="sd">            Page of the results</span>
<span class="sd">        similarity_metric: string</span>
<span class="sd">            Similarity Metric, choose from [&#39;cosine&#39;, &#39;l1&#39;, &#39;l2&#39;, &#39;dp&#39;]</span>
<span class="sd">        facets: list</span>
<span class="sd">            Fields to include in the facets, if [] then all</span>
<span class="sd">        filters: list</span>
<span class="sd">            Query for filtering the search results</span>
<span class="sd">        min_score: int</span>
<span class="sd">            Minimum score for similarity metric</span>
<span class="sd">        select_fields: list</span>
<span class="sd">            Fields to include in the search results, empty array/list means all fields.</span>
<span class="sd">        include_vector: bool</span>
<span class="sd">            Include vectors in the search results</span>
<span class="sd">        include_count: bool</span>
<span class="sd">            Include the total count of results in the search results</span>
<span class="sd">        asc: bool</span>
<span class="sd">            Whether to sort results by ascending or descending order</span>
<span class="sd">        keep_search_history: bool</span>
<span class="sd">            Whether to store the history into VecDB. This will increase the storage costs over time.</span>
<span class="sd">        hundred_scale: bool</span>
<span class="sd">            Whether to scale up the metric by 100</span>
<span class="sd">        search_history_id: string</span>
<span class="sd">            Search history ID, only used for storing search histories.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">make_http_request</span><span class="p">(</span>
            <span class="s2">&quot;/services/search/vector&quot;</span><span class="p">,</span>
            <span class="n">method</span><span class="o">=</span><span class="s2">&quot;POST&quot;</span><span class="p">,</span>
            <span class="n">parameters</span><span class="o">=</span><span class="p">{</span>
                <span class="s2">&quot;dataset_id&quot;</span><span class="p">:</span> <span class="n">dataset_id</span><span class="p">,</span>
                <span class="s2">&quot;multivector_query&quot;</span><span class="p">:</span> <span class="n">multivector_query</span><span class="p">,</span>
                <span class="s2">&quot;positive_document_ids&quot;</span><span class="p">:</span> <span class="n">positive_document_ids</span><span class="p">,</span>
                <span class="s2">&quot;negative_document_ids&quot;</span><span class="p">:</span> <span class="n">negative_document_ids</span><span class="p">,</span>
                <span class="s2">&quot;vector_operation&quot;</span><span class="p">:</span> <span class="n">vector_operation</span><span class="p">,</span>
                <span class="s2">&quot;approximation_depth&quot;</span><span class="p">:</span> <span class="n">approximation_depth</span><span class="p">,</span>
                <span class="s2">&quot;sum_fields&quot;</span><span class="p">:</span> <span class="n">sum_fields</span><span class="p">,</span>
                <span class="s2">&quot;page_size&quot;</span><span class="p">:</span> <span class="n">page_size</span><span class="p">,</span>
                <span class="s2">&quot;page&quot;</span><span class="p">:</span> <span class="n">page</span><span class="p">,</span>
                <span class="s2">&quot;similarity_metric&quot;</span><span class="p">:</span> <span class="n">similarity_metric</span><span class="p">,</span>
                <span class="s2">&quot;facets&quot;</span><span class="p">:</span> <span class="n">facets</span><span class="p">,</span>
                <span class="s2">&quot;filters&quot;</span><span class="p">:</span> <span class="n">filters</span><span class="p">,</span>
                <span class="s2">&quot;min_score&quot;</span><span class="p">:</span> <span class="n">min_score</span><span class="p">,</span>
                <span class="s2">&quot;select_fields&quot;</span><span class="p">:</span> <span class="n">select_fields</span><span class="p">,</span>
                <span class="s2">&quot;include_vector&quot;</span><span class="p">:</span> <span class="n">include_vector</span><span class="p">,</span>
                <span class="s2">&quot;include_count&quot;</span><span class="p">:</span> <span class="n">include_count</span><span class="p">,</span>
                <span class="s2">&quot;asc&quot;</span><span class="p">:</span> <span class="n">asc</span><span class="p">,</span>
                <span class="s2">&quot;keep_search_history&quot;</span><span class="p">:</span> <span class="n">keep_search_history</span><span class="p">,</span>
                <span class="s2">&quot;hundred_scale&quot;</span><span class="p">:</span> <span class="n">hundred_scale</span><span class="p">,</span>
                <span class="s2">&quot;search_history_id&quot;</span><span class="p">:</span> <span class="n">search_history_id</span></div>
            <span class="p">}</span>
        <span class="p">)</span>

<div class="viewcode-block" id="Search.hybrid"><a class="viewcode-back" href="../../../../relevanceai.api.endpoints.html#relevanceai.api.endpoints.search.Search.hybrid">[docs]</a>    <span class="k">def</span> <span class="nf">hybrid</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">dataset_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">multivector_query</span><span class="p">:</span> <span class="n">List</span><span class="p">,</span>
        <span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">fields</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span>
        <span class="n">edit_distance</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">ignore_spaces</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">traditional_weight</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.075</span><span class="p">,</span>
        <span class="n">page_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span>
        <span class="n">page</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">similarity_metric</span><span class="o">=</span><span class="s2">&quot;cosine&quot;</span><span class="p">,</span>
        <span class="n">facets</span><span class="o">=</span><span class="p">[],</span>
        <span class="n">filters</span><span class="o">=</span><span class="p">[],</span>
        <span class="n">min_score</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
        <span class="n">select_fields</span><span class="o">=</span><span class="p">[],</span>
        <span class="n">include_vector</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">include_count</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">asc</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">keep_search_history</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">hundred_scale</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">search_history_id</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; </span>
<span class="sd">        Combine the best of both traditional keyword faceted search with semantic vector search to create the best search possible. \n</span>

<span class="sd">        For information on how to use vector search check out services.search.vector. \n</span>

<span class="sd">        For information on how to use traditional keyword faceted search check out services.search.traditional.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        dataset_id : string</span>
<span class="sd">            Unique name of dataset</span>
<span class="sd">        multivector_query : list</span>
<span class="sd">            Query for advance search that allows for multiple vector and field querying.</span>
<span class="sd">        text : string</span>
<span class="sd">            Text Search Query (not encoded as vector)</span>
<span class="sd">        fields : list</span>
<span class="sd">            Text fields to search against</span>
<span class="sd">        positive_document_ids : dict</span>
<span class="sd">            Positive document IDs to personalize the results with, this will retrive the vectors from the document IDs and consider it in the operation.</span>
<span class="sd">        negative_document_ids: dict</span>
<span class="sd">            Negative document IDs to personalize the results with, this will retrive the vectors from the document IDs and consider it in the operation.</span>
<span class="sd">        approximation_depth: int</span>
<span class="sd">            Used for approximate search to speed up search. The higher the number, faster the search but potentially less accurate.</span>
<span class="sd">        vector_operation: string</span>
<span class="sd">            Aggregation for the vectors when using positive and negative document IDs, choose from [&#39;mean&#39;, &#39;sum&#39;, &#39;min&#39;, &#39;max&#39;, &#39;divide&#39;, &#39;mulitple&#39;]</span>
<span class="sd">        sum_fields : bool</span>
<span class="sd">            Whether to sum the multiple vectors similarity search score as 1 or seperate</span>
<span class="sd">        page_size: int</span>
<span class="sd">            Size of each page of results</span>
<span class="sd">        page: int</span>
<span class="sd">            Page of the results</span>
<span class="sd">        similarity_metric: string</span>
<span class="sd">            Similarity Metric, choose from [&#39;cosine&#39;, &#39;l1&#39;, &#39;l2&#39;, &#39;dp&#39;]</span>
<span class="sd">        facets: list</span>
<span class="sd">            Fields to include in the facets, if [] then all</span>
<span class="sd">        filters: list</span>
<span class="sd">            Query for filtering the search results</span>
<span class="sd">        min_score: float</span>
<span class="sd">            Minimum score for similarity metric</span>
<span class="sd">        select_fields: list</span>
<span class="sd">            Fields to include in the search results, empty array/list means all fields.</span>
<span class="sd">        include_vector: bool</span>
<span class="sd">            Include vectors in the search results</span>
<span class="sd">        include_count: bool</span>
<span class="sd">            Include the total count of results in the search results</span>
<span class="sd">        asc: bool</span>
<span class="sd">            Whether to sort results by ascending or descending order</span>
<span class="sd">        keep_search_history: bool</span>
<span class="sd">            Whether to store the history into VecDB. This will increase the storage costs over time.</span>
<span class="sd">        hundred_scale: bool</span>
<span class="sd">            Whether to scale up the metric by 100</span>
<span class="sd">        search_history_id: string</span>
<span class="sd">            Search history ID, only used for storing search histories.</span>
<span class="sd">        edit_distance: int</span>
<span class="sd">            This refers to the amount of letters it takes to reach from 1 string to another string. e.g. band vs bant is a 1 word edit distance. Use -1 if you would like this to be automated.</span>
<span class="sd">        ignore_spaces: bool</span>
<span class="sd">            Whether to consider cases when there is a space in the word. E.g. Go Pro vs GoPro.</span>
<span class="sd">        traditional_weight: int</span>
<span class="sd">            Multiplier of traditional search score. A value of 0.025~0.075 is the ideal range</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">make_http_request</span><span class="p">(</span>
            <span class="s2">&quot;/services/search/hybrid&quot;</span><span class="p">,</span>
            <span class="n">method</span><span class="o">=</span><span class="s2">&quot;POST&quot;</span><span class="p">,</span>
            <span class="n">parameters</span><span class="o">=</span><span class="p">{</span>
                <span class="s2">&quot;dataset_id&quot;</span><span class="p">:</span> <span class="s2">&quot;ecommerce-experiments&quot;</span><span class="p">,</span>
                <span class="s2">&quot;dataset_id&quot;</span><span class="p">:</span> <span class="n">dataset_id</span><span class="p">,</span>
                <span class="s2">&quot;multivector_query&quot;</span><span class="p">:</span> <span class="n">multivector_query</span><span class="p">,</span>
                <span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="n">text</span><span class="p">,</span>
                <span class="s2">&quot;fields&quot;</span><span class="p">:</span> <span class="n">fields</span><span class="p">,</span>
                <span class="s2">&quot;page_size&quot;</span><span class="p">:</span> <span class="n">page_size</span><span class="p">,</span>
                <span class="s2">&quot;page&quot;</span><span class="p">:</span> <span class="n">page</span><span class="p">,</span>
                <span class="s2">&quot;similarity_metric&quot;</span><span class="p">:</span> <span class="n">similarity_metric</span><span class="p">,</span>
                <span class="s2">&quot;facets&quot;</span><span class="p">:</span> <span class="n">facets</span><span class="p">,</span>
                <span class="s2">&quot;filters&quot;</span><span class="p">:</span> <span class="n">filters</span><span class="p">,</span>
                <span class="s2">&quot;min_score&quot;</span><span class="p">:</span> <span class="n">min_score</span><span class="p">,</span>
                <span class="s2">&quot;select_fields&quot;</span><span class="p">:</span> <span class="n">select_fields</span><span class="p">,</span>
                <span class="s2">&quot;include_vector&quot;</span><span class="p">:</span> <span class="n">include_vector</span><span class="p">,</span>
                <span class="s2">&quot;include_count&quot;</span><span class="p">:</span> <span class="n">include_count</span><span class="p">,</span>
                <span class="s2">&quot;asc&quot;</span><span class="p">:</span> <span class="n">asc</span><span class="p">,</span>
                <span class="s2">&quot;keep_search_history&quot;</span><span class="p">:</span> <span class="n">keep_search_history</span><span class="p">,</span>
                <span class="s2">&quot;hundred_scale&quot;</span><span class="p">:</span> <span class="n">hundred_scale</span><span class="p">,</span>
                <span class="s2">&quot;search_history_id&quot;</span><span class="p">:</span> <span class="n">search_history_id</span><span class="p">,</span>
                <span class="s2">&quot;edit_distance&quot;</span><span class="p">:</span> <span class="n">edit_distance</span><span class="p">,</span>
                <span class="s2">&quot;ignore_spaces&quot;</span><span class="p">:</span> <span class="n">ignore_spaces</span><span class="p">,</span>
                <span class="s2">&quot;traditional_weight&quot;</span><span class="p">:</span> <span class="n">traditional_weight</span><span class="p">,</span></div>
            <span class="p">}</span>
        <span class="p">)</span>

<div class="viewcode-block" id="Search.semantic"><a class="viewcode-back" href="../../../../relevanceai.api.endpoints.html#relevanceai.api.endpoints.search.Search.semantic">[docs]</a>    <span class="k">def</span> <span class="nf">semantic</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">dataset_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">multivector_query</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span>
        <span class="n">fields</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span>
        <span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">page_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span>
        <span class="n">page</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">similarity_metric</span><span class="o">=</span><span class="s2">&quot;cosine&quot;</span><span class="p">,</span>
        <span class="n">facets</span><span class="o">=</span><span class="p">[],</span>
        <span class="n">filters</span><span class="o">=</span><span class="p">[],</span>
        <span class="n">min_score</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
        <span class="n">select_fields</span><span class="o">=</span><span class="p">[],</span>
        <span class="n">include_vector</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">include_count</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">asc</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">keep_search_history</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">hundred_scale</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; </span>
<span class="sd">        A more automated hybrid search with a few extra things that automatically adjusts some of the key parameters for more automated and good out of the box results. \n</span>

<span class="sd">        For information on how to configure semantic search check out services.search.hybrid.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        dataset_id : string</span>
<span class="sd">            Unique name of dataset</span>
<span class="sd">        multivector_query : list</span>
<span class="sd">            Query for advance search that allows for multiple vector and field querying.</span>
<span class="sd">        positive_document_ids : dict</span>
<span class="sd">            Positive document IDs to personalize the results with, this will retrive the vectors from the document IDs and consider it in the operation.</span>
<span class="sd">        negative_document_ids: dict</span>
<span class="sd">            Negative document IDs to personalize the results with, this will retrive the vectors from the document IDs and consider it in the operation.</span>
<span class="sd">        text : string</span>
<span class="sd">            Text Search Query (not encoded as vector)</span>
<span class="sd">        fields : list</span>
<span class="sd">            Text fields to search against</span>
<span class="sd">        approximation_depth: int</span>
<span class="sd">            Used for approximate search to speed up search. The higher the number, faster the search but potentially less accurate.</span>
<span class="sd">        sum_fields : bool</span>
<span class="sd">            Whether to sum the multiple vectors similarity search score as 1 or seperate</span>
<span class="sd">        page_size: int</span>
<span class="sd">            Size of each page of results</span>
<span class="sd">        page: int</span>
<span class="sd">            Page of the results</span>
<span class="sd">        similarity_metric: string</span>
<span class="sd">            Similarity Metric, choose from [&#39;cosine&#39;, &#39;l1&#39;, &#39;l2&#39;, &#39;dp&#39;]</span>
<span class="sd">        facets: list</span>
<span class="sd">            Fields to include in the facets, if [] then all</span>
<span class="sd">        filters: list</span>
<span class="sd">            Query for filtering the search results</span>
<span class="sd">        min_score: int</span>
<span class="sd">            Minimum score for similarity metric</span>
<span class="sd">        select_fields: list</span>
<span class="sd">            Fields to include in the search results, empty array/list means all fields.</span>
<span class="sd">        include_vector: bool</span>
<span class="sd">            Include vectors in the search results</span>
<span class="sd">        include_count: bool</span>
<span class="sd">            Include the total count of results in the search results</span>
<span class="sd">        asc: bool</span>
<span class="sd">            Whether to sort results by ascending or descending order</span>
<span class="sd">        keep_search_history: bool</span>
<span class="sd">            Whether to store the history into VecDB. This will increase the storage costs over time.</span>
<span class="sd">        hundred_scale: bool</span>
<span class="sd">            Whether to scale up the metric by 100</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">make_http_request</span><span class="p">(</span>
            <span class="s2">&quot;/services/search/semantic&quot;</span><span class="p">,</span>
            <span class="n">method</span><span class="o">=</span><span class="s2">&quot;POST&quot;</span><span class="p">,</span>
            <span class="n">parameters</span><span class="o">=</span><span class="p">{</span>
                <span class="s2">&quot;dataset_id&quot;</span><span class="p">:</span> <span class="n">dataset_id</span><span class="p">,</span>
                <span class="s2">&quot;multivector_query&quot;</span><span class="p">:</span> <span class="n">multivector_query</span><span class="p">,</span>
                <span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="n">text</span><span class="p">,</span>
                <span class="s2">&quot;fields&quot;</span><span class="p">:</span> <span class="n">fields</span><span class="p">,</span>
                <span class="s2">&quot;page_size&quot;</span><span class="p">:</span> <span class="n">page_size</span><span class="p">,</span>
                <span class="s2">&quot;page&quot;</span><span class="p">:</span> <span class="n">page</span><span class="p">,</span>
                <span class="s2">&quot;similarity_metric&quot;</span><span class="p">:</span> <span class="n">similarity_metric</span><span class="p">,</span>
                <span class="s2">&quot;facets&quot;</span><span class="p">:</span> <span class="n">facets</span><span class="p">,</span>
                <span class="s2">&quot;filters&quot;</span><span class="p">:</span> <span class="n">filters</span><span class="p">,</span>
                <span class="s2">&quot;min_score&quot;</span><span class="p">:</span> <span class="n">min_score</span><span class="p">,</span>
                <span class="s2">&quot;select_fields&quot;</span><span class="p">:</span> <span class="n">select_fields</span><span class="p">,</span>
                <span class="s2">&quot;include_vector&quot;</span><span class="p">:</span> <span class="n">include_vector</span><span class="p">,</span>
                <span class="s2">&quot;include_count&quot;</span><span class="p">:</span> <span class="n">include_count</span><span class="p">,</span>
                <span class="s2">&quot;asc&quot;</span><span class="p">:</span> <span class="n">asc</span><span class="p">,</span>
                <span class="s2">&quot;keep_search_history&quot;</span><span class="p">:</span> <span class="n">keep_search_history</span><span class="p">,</span>
                <span class="s2">&quot;hundred_scale&quot;</span><span class="p">:</span> <span class="n">hundred_scale</span><span class="p">,</span></div>
            <span class="p">}</span>
        <span class="p">)</span>

<div class="viewcode-block" id="Search.diversity"><a class="viewcode-back" href="../../../../relevanceai.api.endpoints.html#relevanceai.api.endpoints.search.Search.diversity">[docs]</a>    <span class="k">def</span> <span class="nf">diversity</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">dataset_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">cluster_vector_field</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">n_clusters</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">multivector_query</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span>
        <span class="n">positive_document_ids</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{},</span>
        <span class="n">negative_document_ids</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{},</span>
        <span class="n">vector_operation</span><span class="o">=</span><span class="s2">&quot;sum&quot;</span><span class="p">,</span>
        <span class="n">approximation_depth</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">sum_fields</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">page_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span>
        <span class="n">page</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
        <span class="n">similarity_metric</span><span class="o">=</span><span class="s2">&quot;cosine&quot;</span><span class="p">,</span>
        <span class="n">facets</span><span class="o">=</span><span class="p">[],</span>
        <span class="n">filters</span><span class="o">=</span><span class="p">[],</span>
        <span class="n">min_score</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
        <span class="n">select_fields</span><span class="o">=</span><span class="p">[],</span>
        <span class="n">include_vector</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">include_count</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">asc</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">keep_search_history</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">hundred_scale</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">search_history_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">n_init</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
        <span class="n">n_iter</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
        <span class="n">return_as_clusters</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; </span>
<span class="sd">        This will first perform an advanced search and then cluster the top X (page_size) search results. Results are returned as such: Once you have the clusters:</span>
<span class="sd">        </span>
<span class="sd">        &gt;&gt;&gt; Cluster 0: [A, B, C]</span>
<span class="sd">        &gt;&gt;&gt; Cluster 1: [D, E]</span>
<span class="sd">        &gt;&gt;&gt; Cluster 2: [F, G]</span>
<span class="sd">        &gt;&gt;&gt; Cluster 3: [H, I]</span>

<span class="sd">        (Note, each cluster is ordered by highest to lowest search score.) \n</span>

<span class="sd">        This intermediately returns:</span>

<span class="sd">        &gt;&gt;&gt; results_batch_1: [A, H, F, D] (ordered by highest search score)</span>
<span class="sd">        &gt;&gt;&gt; results_batch_2: [G, E, B, I] (ordered by highest search score)</span>
<span class="sd">        &gt;&gt;&gt; results_batch_3: [C]</span>

<span class="sd">        This then returns the final results:</span>

<span class="sd">        &gt;&gt;&gt; results: [A, H, F, D, G, E, B, I, C]</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        dataset_id : string</span>
<span class="sd">            Unique name of dataset</span>
<span class="sd">        cluster_vector_field: str</span>
<span class="sd">            The field to cluster on.</span>
<span class="sd">        multivector_query : list</span>
<span class="sd">            Query for advance search that allows for multiple vector and field querying.</span>
<span class="sd">        positive_document_ids : dict</span>
<span class="sd">            Positive document IDs to personalize the results with, this will retrive the vectors from the document IDs and consider it in the operation.</span>
<span class="sd">        negative_document_ids: dict</span>
<span class="sd">            Negative document IDs to personalize the results with, this will retrive the vectors from the document IDs and consider it in the operation.</span>
<span class="sd">        approximation_depth: int</span>
<span class="sd">            Used for approximate search to speed up search. The higher the number, faster the search but potentially less accurate.</span>
<span class="sd">        vector_operation: string</span>
<span class="sd">            Aggregation for the vectors when using positive and negative document IDs, choose from [&#39;mean&#39;, &#39;sum&#39;, &#39;min&#39;, &#39;max&#39;, &#39;divide&#39;, &#39;mulitple&#39;]</span>
<span class="sd">        sum_fields : bool</span>
<span class="sd">            Whether to sum the multiple vectors similarity search score as 1 or seperate</span>
<span class="sd">        page_size: int</span>
<span class="sd">            Size of each page of results</span>
<span class="sd">        page: int</span>
<span class="sd">            Page of the results</span>
<span class="sd">        similarity_metric: string</span>
<span class="sd">            Similarity Metric, choose from [&#39;cosine&#39;, &#39;l1&#39;, &#39;l2&#39;, &#39;dp&#39;]</span>
<span class="sd">        facets: list</span>
<span class="sd">            Fields to include in the facets, if [] then all</span>
<span class="sd">        filters: list</span>
<span class="sd">            Query for filtering the search results</span>
<span class="sd">        min_score: int</span>
<span class="sd">            Minimum score for similarity metric</span>
<span class="sd">        select_fields: list</span>
<span class="sd">            Fields to include in the search results, empty array/list means all fields.</span>
<span class="sd">        include_vector: bool</span>
<span class="sd">            Include vectors in the search results</span>
<span class="sd">        include_count: bool</span>
<span class="sd">            Include the total count of results in the search results</span>
<span class="sd">        asc: bool</span>
<span class="sd">            Whether to sort results by ascending or descending order</span>
<span class="sd">        keep_search_history: bool</span>
<span class="sd">            Whether to store the history into VecDB. This will increase the storage costs over time.</span>
<span class="sd">        hundred_scale: bool</span>
<span class="sd">            Whether to scale up the metric by 100</span>
<span class="sd">        search_history_id: str</span>
<span class="sd">            Search history ID, only used for storing search histories.</span>
<span class="sd">        n_clusters: int</span>
<span class="sd">            Number of clusters to be specified.</span>
<span class="sd">        n_init: int</span>
<span class="sd">            Number of runs to run with different centroid seeds</span>
<span class="sd">        n_iter: int</span>
<span class="sd">            Number of iterations in each run</span>
<span class="sd">        return_as_clusters: bool</span>
<span class="sd">            If True, return as clusters as opposed to results list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">make_http_request</span><span class="p">(</span>
            <span class="s2">&quot;/services/search/diversity&quot;</span><span class="p">,</span>
            <span class="n">method</span><span class="o">=</span><span class="s2">&quot;POST&quot;</span><span class="p">,</span>
            <span class="n">parameters</span><span class="o">=</span><span class="p">{</span>
                <span class="s2">&quot;dataset_id&quot;</span><span class="p">:</span> <span class="n">dataset_id</span><span class="p">,</span>
                <span class="s2">&quot;multivector_query&quot;</span><span class="p">:</span> <span class="n">multivector_query</span><span class="p">,</span>
                <span class="s2">&quot;positive_document_ids&quot;</span><span class="p">:</span> <span class="n">positive_document_ids</span><span class="p">,</span>
                <span class="s2">&quot;negative_document_ids&quot;</span><span class="p">:</span> <span class="n">negative_document_ids</span><span class="p">,</span>
                <span class="s2">&quot;vector_operation&quot;</span><span class="p">:</span> <span class="n">vector_operation</span><span class="p">,</span>
                <span class="s2">&quot;approximation_depth&quot;</span><span class="p">:</span> <span class="n">approximation_depth</span><span class="p">,</span>
                <span class="s2">&quot;sum_fields&quot;</span><span class="p">:</span> <span class="n">sum_fields</span><span class="p">,</span>
                <span class="s2">&quot;page_size&quot;</span><span class="p">:</span> <span class="n">page_size</span><span class="p">,</span>
                <span class="s2">&quot;page&quot;</span><span class="p">:</span> <span class="n">page</span><span class="p">,</span>
                <span class="s2">&quot;similarity_metric&quot;</span><span class="p">:</span> <span class="n">similarity_metric</span><span class="p">,</span>
                <span class="s2">&quot;facets&quot;</span><span class="p">:</span> <span class="n">facets</span><span class="p">,</span>
                <span class="s2">&quot;filters&quot;</span><span class="p">:</span> <span class="n">filters</span><span class="p">,</span>
                <span class="s2">&quot;min_score&quot;</span><span class="p">:</span> <span class="n">min_score</span><span class="p">,</span>
                <span class="s2">&quot;select_fields&quot;</span><span class="p">:</span> <span class="n">select_fields</span><span class="p">,</span>
                <span class="s2">&quot;include_vector&quot;</span><span class="p">:</span> <span class="n">include_vector</span><span class="p">,</span>
                <span class="s2">&quot;include_count&quot;</span><span class="p">:</span> <span class="n">include_count</span><span class="p">,</span>
                <span class="s2">&quot;asc&quot;</span><span class="p">:</span> <span class="n">asc</span><span class="p">,</span>
                <span class="s2">&quot;keep_search_history&quot;</span><span class="p">:</span> <span class="n">keep_search_history</span><span class="p">,</span>
                <span class="s2">&quot;hundred_scale&quot;</span><span class="p">:</span> <span class="n">hundred_scale</span><span class="p">,</span>
                <span class="s2">&quot;search_history_id&quot;</span><span class="p">:</span> <span class="n">search_history_id</span><span class="p">,</span>
                <span class="s2">&quot;cluster_vector_field&quot;</span><span class="p">:</span> <span class="n">cluster_vector_field</span><span class="p">,</span>
                <span class="s2">&quot;n_clusters&quot;</span><span class="p">:</span> <span class="n">n_clusters</span><span class="p">,</span>
                <span class="s2">&quot;n_init&quot;</span><span class="p">:</span> <span class="n">n_init</span><span class="p">,</span>
                <span class="s2">&quot;n_iter&quot;</span><span class="p">:</span> <span class="n">n_iter</span><span class="p">,</span>
                <span class="s2">&quot;return_as_clusters&quot;</span><span class="p">:</span> <span class="n">return_as_clusters</span><span class="p">,</span></div>
            <span class="p">}</span>
        <span class="p">)</span>

<div class="viewcode-block" id="Search.traditional"><a class="viewcode-back" href="../../../../relevanceai.api.endpoints.html#relevanceai.api.endpoints.search.Search.traditional">[docs]</a>    <span class="k">def</span> <span class="nf">traditional</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">dataset_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">fields</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[],</span>
        <span class="n">edit_distance</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">ignore_spaces</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">page_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">29</span><span class="p">,</span>
        <span class="n">page</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
        <span class="n">select_fields</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[],</span>
        <span class="n">include_vector</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">include_count</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">asc</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">keep_search_history</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">search_history_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; </span>
<span class="sd">        Traditional Faceted Keyword Search with edit distance/fuzzy matching. \n</span>

<span class="sd">        For information on how to apply facets/filters check out datasets.documents.get_where. \n</span>

<span class="sd">        For information on how to construct the facets section for your search bar check out datasets.facets.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        dataset_id : string</span>
<span class="sd">            Unique name of dataset</span>
<span class="sd">        multivector_query : list</span>
<span class="sd">            Query for advance search that allows for multiple vector and field querying.</span>
<span class="sd">        text : string</span>
<span class="sd">            Text Search Query (not encoded as vector)</span>
<span class="sd">        fields : list</span>
<span class="sd">            Text fields to search against</span>
<span class="sd">        edit_distance: int</span>
<span class="sd">            This refers to the amount of letters it takes to reach from 1 string to another string. e.g. band vs bant is a 1 word edit distance. Use -1 if you would like this to be automated.</span>
<span class="sd">        ignore_spaces: bool</span>
<span class="sd">            Whether to consider cases when there is a space in the word. E.g. Go Pro vs GoPro.</span>
<span class="sd">        page_size: int</span>
<span class="sd">            Size of each page of results</span>
<span class="sd">        page: int</span>
<span class="sd">            Page of the results</span>
<span class="sd">        select_fields: list</span>
<span class="sd">            Fields to include in the search results, empty array/list means all fields.</span>
<span class="sd">        include_vector: bool</span>
<span class="sd">            Include vectors in the search results</span>
<span class="sd">        include_count: bool</span>
<span class="sd">            Include the total count of results in the search results</span>
<span class="sd">        asc: bool</span>
<span class="sd">            Whether to sort results by ascending or descending order</span>
<span class="sd">        keep_search_history: bool</span>
<span class="sd">            Whether to store the history into VecDB. This will increase the storage costs over time.</span>
<span class="sd">        search_history_id: string</span>
<span class="sd">            Search history ID, only used for storing search histories.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">make_http_request</span><span class="p">(</span>
            <span class="s2">&quot;/services/search/traditional&quot;</span><span class="p">,</span>
            <span class="n">method</span><span class="o">=</span><span class="s2">&quot;POST&quot;</span><span class="p">,</span>
            <span class="n">parameters</span><span class="o">=</span><span class="p">{</span>
                <span class="s2">&quot;dataset_id&quot;</span><span class="p">:</span> <span class="n">dataset_id</span><span class="p">,</span>
                <span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="n">text</span><span class="p">,</span>
                <span class="s2">&quot;fields&quot;</span><span class="p">:</span> <span class="n">fields</span><span class="p">,</span>
                <span class="s2">&quot;edit_distance&quot;</span><span class="p">:</span> <span class="n">edit_distance</span><span class="p">,</span>
                <span class="s2">&quot;ignore_spaces&quot;</span><span class="p">:</span> <span class="n">ignore_spaces</span><span class="p">,</span>
                <span class="s2">&quot;page_size&quot;</span><span class="p">:</span> <span class="n">page_size</span><span class="p">,</span>
                <span class="s2">&quot;page&quot;</span><span class="p">:</span> <span class="n">page</span><span class="p">,</span>
                <span class="s2">&quot;select_fields&quot;</span><span class="p">:</span> <span class="n">select_fields</span><span class="p">,</span>
                <span class="s2">&quot;include_vector&quot;</span><span class="p">:</span> <span class="n">include_vector</span><span class="p">,</span>
                <span class="s2">&quot;include_count&quot;</span><span class="p">:</span> <span class="n">include_count</span><span class="p">,</span>
                <span class="s2">&quot;asc&quot;</span><span class="p">:</span> <span class="n">asc</span><span class="p">,</span>
                <span class="s2">&quot;keep_search_history&quot;</span><span class="p">:</span> <span class="n">keep_search_history</span><span class="p">,</span>
                <span class="s2">&quot;search_history_id&quot;</span><span class="p">:</span> <span class="n">search_history_id</span><span class="p">,</span></div>
            <span class="p">}</span>
        <span class="p">)</span>

<div class="viewcode-block" id="Search.chunk"><a class="viewcode-back" href="../../../../relevanceai.api.endpoints.html#relevanceai.api.endpoints.search.Search.chunk">[docs]</a>    <span class="k">def</span> <span class="nf">chunk</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">dataset_id</span><span class="p">,</span>
        <span class="n">multivector_query</span><span class="p">,</span>
        <span class="n">chunk_field</span><span class="p">,</span>
        <span class="n">chunk_scoring</span><span class="o">=</span><span class="s2">&quot;max&quot;</span><span class="p">,</span>
        <span class="n">chunk_page_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
        <span class="n">chunk_page</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
        <span class="n">approximation_depth</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">sum_fields</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">page_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span>
        <span class="n">page</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
        <span class="n">similarity_metric</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;cosine&quot;</span><span class="p">,</span>
        <span class="n">facets</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[],</span>
        <span class="n">filters</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[],</span>
        <span class="n">min_score</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">include_vector</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">include_count</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">asc</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">keep_search_history</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">hundred_scale</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="p">):</span>

        <span class="sd">&quot;&quot;&quot; </span>
<span class="sd">        Chunks are data that has been divided into different units. e.g. A paragraph is made of many sentence chunks, a sentence is made of many word chunks, an image frame in a video. By searching through chunks you can pinpoint more specifically where a match is occuring. When creating a chunk in your document use the suffix &quot;chunk&quot; and &quot;chunkvector&quot;. An example of a document with chunks:</span>
<span class="sd">        </span>
<span class="sd">        &gt;&gt;&gt; {</span>
<span class="sd">        &gt;&gt;&gt;     &quot;_id&quot; : &quot;123&quot;,</span>
<span class="sd">        &gt;&gt;&gt;     &quot;title&quot; : &quot;Lorem Ipsum Article&quot;,</span>
<span class="sd">        &gt;&gt;&gt;     &quot;description&quot; : &quot;Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry&#39;s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged.&quot;,</span>
<span class="sd">        &gt;&gt;&gt;     &quot;description_vector_&quot; : [1.1, 1.2, 1.3],</span>
<span class="sd">        &gt;&gt;&gt;     &quot;description_sentence_chunk_&quot; : [</span>
<span class="sd">        &gt;&gt;&gt;         {&quot;sentence_id&quot; : 0, &quot;sentence_chunkvector_&quot; : [0.1, 0.2, 0.3], &quot;sentence&quot; : &quot;Lorem Ipsum is simply dummy text of the printing and typesetting industry.&quot;},</span>
<span class="sd">        &gt;&gt;&gt;         {&quot;sentence_id&quot; : 1, &quot;sentence_chunkvector_&quot; : [0.4, 0.5, 0.6], &quot;sentence&quot; : &quot;Lorem Ipsum has been the industry&#39;s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book.&quot;},</span>
<span class="sd">        &gt;&gt;&gt;         {&quot;sentence_id&quot; : 2, &quot;sentence_chunkvector_&quot; : [0.7, 0.8, 0.9], &quot;sentence&quot; : &quot;It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged.&quot;},</span>
<span class="sd">        &gt;&gt;&gt;     ]</span>
<span class="sd">        &gt;&gt;&gt; }</span>
<span class="sd">        </span>
<span class="sd">        For combining chunk search with other search check out services.search.advanced_chunk.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        dataset_id : string</span>
<span class="sd">            Unique name of dataset</span>
<span class="sd">        multivector_query : list</span>
<span class="sd">            Query for advance search that allows for multiple vector and field querying.</span>
<span class="sd">        chunk_field : string</span>
<span class="sd">            Field where the array of chunked documents are.</span>
<span class="sd">        chunk_scoring: string</span>
<span class="sd">            Scoring method for determining for ranking between document chunks.</span>
<span class="sd">        chunk_page_size: int</span>
<span class="sd">            Size of each page of chunk results</span>
<span class="sd">        chunk_page: int</span>
<span class="sd">            Page of the chunk results</span>
<span class="sd">        approximation_depth: int</span>
<span class="sd">            Used for approximate search to speed up search. The higher the number, faster the search but potentially less accurate.</span>
<span class="sd">        sum_fields : bool</span>
<span class="sd">            Whether to sum the multiple vectors similarity search score as 1 or seperate</span>
<span class="sd">        page_size: int</span>
<span class="sd">            Size of each page of results</span>
<span class="sd">        page: int</span>
<span class="sd">            Page of the results</span>
<span class="sd">        similarity_metric: string</span>
<span class="sd">            Similarity Metric, choose from [&#39;cosine&#39;, &#39;l1&#39;, &#39;l2&#39;, &#39;dp&#39;]</span>
<span class="sd">        facets: list</span>
<span class="sd">            Fields to include in the facets, if [] then all</span>
<span class="sd">        filters: list</span>
<span class="sd">            Query for filtering the search results</span>
<span class="sd">        min_score: int</span>
<span class="sd">            Minimum score for similarity metric</span>
<span class="sd">        include_vector: bool</span>
<span class="sd">            Include vectors in the search results</span>
<span class="sd">        include_count: bool</span>
<span class="sd">            Include the total count of results in the search results</span>
<span class="sd">        asc: bool</span>
<span class="sd">            Whether to sort results by ascending or descending order</span>
<span class="sd">        keep_search_history: bool</span>
<span class="sd">            Whether to store the history into VecDB. This will increase the storage costs over time.</span>
<span class="sd">        hundred_scale: bool</span>
<span class="sd">            Whether to scale up the metric by 100</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">make_http_request</span><span class="p">(</span>
            <span class="s2">&quot;/services/search/chunk&quot;</span><span class="p">,</span>
            <span class="n">method</span><span class="o">=</span><span class="s2">&quot;POST&quot;</span><span class="p">,</span>
            <span class="n">parameters</span><span class="o">=</span><span class="p">{</span>
                <span class="s2">&quot;dataset_id&quot;</span><span class="p">:</span> <span class="n">dataset_id</span><span class="p">,</span>
                <span class="s2">&quot;multivector_query&quot;</span><span class="p">:</span> <span class="n">multivector_query</span><span class="p">,</span>
                <span class="s2">&quot;chunk_field&quot;</span><span class="p">:</span> <span class="n">chunk_field</span><span class="p">,</span>
                <span class="s2">&quot;chunk_scoring&quot;</span><span class="p">:</span> <span class="n">chunk_scoring</span><span class="p">,</span>
                <span class="s2">&quot;chunk_page_size&quot;</span><span class="p">:</span> <span class="n">chunk_page_size</span><span class="p">,</span>
                <span class="s2">&quot;chunk_page&quot;</span><span class="p">:</span> <span class="n">chunk_page</span><span class="p">,</span>
                <span class="s2">&quot;approximation_depth&quot;</span><span class="p">:</span> <span class="n">approximation_depth</span><span class="p">,</span>
                <span class="s2">&quot;sum_fields&quot;</span><span class="p">:</span> <span class="n">sum_fields</span><span class="p">,</span>
                <span class="s2">&quot;page_size&quot;</span><span class="p">:</span> <span class="n">page_size</span><span class="p">,</span>
                <span class="s2">&quot;page&quot;</span><span class="p">:</span> <span class="n">page</span><span class="p">,</span>
                <span class="s2">&quot;similarity_metric&quot;</span><span class="p">:</span> <span class="n">similarity_metric</span><span class="p">,</span>
                <span class="s2">&quot;facets&quot;</span><span class="p">:</span> <span class="n">facets</span><span class="p">,</span>
                <span class="s2">&quot;filters&quot;</span><span class="p">:</span> <span class="n">filters</span><span class="p">,</span>
                <span class="s2">&quot;min_score&quot;</span><span class="p">:</span> <span class="n">min_score</span><span class="p">,</span>
                <span class="s2">&quot;include_vector&quot;</span><span class="p">:</span> <span class="n">include_vector</span><span class="p">,</span>
                <span class="s2">&quot;include_count&quot;</span><span class="p">:</span> <span class="n">include_count</span><span class="p">,</span>
                <span class="s2">&quot;asc&quot;</span><span class="p">:</span> <span class="n">asc</span><span class="p">,</span>
                <span class="s2">&quot;keep_search_history&quot;</span><span class="p">:</span> <span class="n">keep_search_history</span><span class="p">,</span>
                <span class="s2">&quot;hundred_scale&quot;</span><span class="p">:</span> <span class="n">hundred_scale</span></div>
            <span class="p">}</span>
        <span class="p">)</span>

<div class="viewcode-block" id="Search.multistep_chunk"><a class="viewcode-back" href="../../../../relevanceai.api.endpoints.html#relevanceai.api.endpoints.search.Search.multistep_chunk">[docs]</a>    <span class="k">def</span> <span class="nf">multistep_chunk</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">dataset_id</span><span class="p">,</span>
        <span class="n">multivector_query</span><span class="p">,</span>
        <span class="n">first_step_multivector_query</span><span class="p">,</span>
        <span class="n">chunk_field</span><span class="p">,</span>
        <span class="n">chunk_scoring</span><span class="o">=</span><span class="s2">&quot;max&quot;</span><span class="p">,</span>
        <span class="n">chunk_page_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
        <span class="n">chunk_page</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
        <span class="n">approximation_depth</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">sum_fields</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">page_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span>
        <span class="n">page</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
        <span class="n">similarity_metric</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;cosine&quot;</span><span class="p">,</span>
        <span class="n">facets</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[],</span>
        <span class="n">filters</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[],</span>
        <span class="n">min_score</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">include_vector</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">include_count</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">asc</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">keep_search_history</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">hundred_scale</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">first_step_page</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
        <span class="n">first_step_page_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">20</span>
    <span class="p">):</span>

        <span class="sd">&quot;&quot;&quot; </span>
<span class="sd">        Multistep chunk search involves a vector search followed by chunk search, used to accelerate chunk searches or to identify context before delving into relevant chunks. e.g. Search against the paragraph vector first then sentence chunkvector after. \n</span>

<span class="sd">        For more information about chunk search check out services.search.chunk. \n</span>

<span class="sd">        For more information about vector search check out services.search.vector</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        dataset_id : string</span>
<span class="sd">            Unique name of dataset</span>
<span class="sd">        multivector_query : list</span>
<span class="sd">            Query for advance search that allows for multiple vector and field querying.</span>
<span class="sd">        chunk_field : string</span>
<span class="sd">            Field where the array of chunked documents are.</span>
<span class="sd">        chunk_scoring: string</span>
<span class="sd">            Scoring method for determining for ranking between document chunks.</span>
<span class="sd">        chunk_page_size: int</span>
<span class="sd">            Size of each page of chunk results</span>
<span class="sd">        chunk_page: int</span>
<span class="sd">            Page of the chunk results</span>
<span class="sd">        approximation_depth: int</span>
<span class="sd">            Used for approximate search to speed up search. The higher the number, faster the search but potentially less accurate.</span>
<span class="sd">        sum_fields : bool</span>
<span class="sd">            Whether to sum the multiple vectors similarity search score as 1 or seperate</span>
<span class="sd">        page_size: int</span>
<span class="sd">            Size of each page of results</span>
<span class="sd">        page: int</span>
<span class="sd">            Page of the results</span>
<span class="sd">        similarity_metric: string</span>
<span class="sd">            Similarity Metric, choose from [&#39;cosine&#39;, &#39;l1&#39;, &#39;l2&#39;, &#39;dp&#39;]</span>
<span class="sd">        facets: list</span>
<span class="sd">            Fields to include in the facets, if [] then all</span>
<span class="sd">        filters: list</span>
<span class="sd">            Query for filtering the search results</span>
<span class="sd">        min_score: int</span>
<span class="sd">            Minimum score for similarity metric</span>
<span class="sd">        include_vector: bool</span>
<span class="sd">            Include vectors in the search results</span>
<span class="sd">        include_count: bool</span>
<span class="sd">            Include the total count of results in the search results</span>
<span class="sd">        asc: bool</span>
<span class="sd">            Whether to sort results by ascending or descending order</span>
<span class="sd">        keep_search_history: bool</span>
<span class="sd">            Whether to store the history into VecDB. This will increase the storage costs over time.</span>
<span class="sd">        hundred_scale: bool</span>
<span class="sd">            Whether to scale up the metric by 100</span>
<span class="sd">        first_step_multivector_query: list</span>
<span class="sd">            Query for advance search that allows for multiple vector and field querying.</span>
<span class="sd">        first_step_page: int</span>
<span class="sd">            Page of the results</span>
<span class="sd">        first_step_page_size: int</span>
<span class="sd">            Size of each page of results</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">make_http_request</span><span class="p">(</span>
            <span class="s2">&quot;/services/search/multistep_chunk&quot;</span><span class="p">,</span>
            <span class="n">method</span><span class="o">=</span><span class="s2">&quot;POST&quot;</span><span class="p">,</span>
            <span class="n">parameters</span><span class="o">=</span><span class="p">{</span>
                <span class="s2">&quot;dataset_id&quot;</span><span class="p">:</span> <span class="n">dataset_id</span><span class="p">,</span>
                <span class="s2">&quot;multivector_query&quot;</span><span class="p">:</span> <span class="n">multivector_query</span><span class="p">,</span>
                <span class="s2">&quot;chunk_field&quot;</span><span class="p">:</span> <span class="n">chunk_field</span><span class="p">,</span>
                <span class="s2">&quot;chunk_scoring&quot;</span><span class="p">:</span> <span class="n">chunk_scoring</span><span class="p">,</span>
                <span class="s2">&quot;chunk_page_size&quot;</span><span class="p">:</span> <span class="n">chunk_page_size</span><span class="p">,</span>
                <span class="s2">&quot;chunk_page&quot;</span><span class="p">:</span> <span class="n">chunk_page</span><span class="p">,</span>
                <span class="s2">&quot;approximation_depth&quot;</span><span class="p">:</span> <span class="n">approximation_depth</span><span class="p">,</span>
                <span class="s2">&quot;sum_fields&quot;</span><span class="p">:</span> <span class="n">sum_fields</span><span class="p">,</span>
                <span class="s2">&quot;page_size&quot;</span><span class="p">:</span> <span class="n">page_size</span><span class="p">,</span>
                <span class="s2">&quot;page&quot;</span><span class="p">:</span> <span class="n">page</span><span class="p">,</span>
                <span class="s2">&quot;similarity_metric&quot;</span><span class="p">:</span> <span class="n">similarity_metric</span><span class="p">,</span>
                <span class="s2">&quot;facets&quot;</span><span class="p">:</span> <span class="n">facets</span><span class="p">,</span>
                <span class="s2">&quot;filters&quot;</span><span class="p">:</span> <span class="n">filters</span><span class="p">,</span>
                <span class="s2">&quot;min_score&quot;</span><span class="p">:</span> <span class="n">min_score</span><span class="p">,</span>
                <span class="s2">&quot;include_vector&quot;</span><span class="p">:</span> <span class="n">include_vector</span><span class="p">,</span>
                <span class="s2">&quot;include_count&quot;</span><span class="p">:</span> <span class="n">include_count</span><span class="p">,</span>
                <span class="s2">&quot;asc&quot;</span><span class="p">:</span> <span class="n">asc</span><span class="p">,</span>
                <span class="s2">&quot;keep_search_history&quot;</span><span class="p">:</span> <span class="n">keep_search_history</span><span class="p">,</span>
                <span class="s2">&quot;hundred_scale&quot;</span><span class="p">:</span> <span class="n">hundred_scale</span><span class="p">,</span>
                <span class="s2">&quot;first_step_multivector_query&quot;</span><span class="p">:</span> <span class="n">first_step_multivector_query</span><span class="p">,</span>
                <span class="s2">&quot;first_step_page&quot;</span><span class="p">:</span> <span class="n">first_step_page</span><span class="p">,</span>
                <span class="s2">&quot;first_step_page_size&quot;</span><span class="p">:</span> <span class="n">first_step_page_size</span><span class="p">,</span></div>
            <span class="p">}</span>
        <span class="p">)</span>

<div class="viewcode-block" id="Search.advanced_chunk"><a class="viewcode-back" href="../../../../relevanceai.api.endpoints.html#relevanceai.api.endpoints.search.Search.advanced_chunk">[docs]</a>    <span class="k">def</span> <span class="nf">advanced_chunk</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">dataset_ids</span><span class="p">,</span>
        <span class="n">chunk_search_query</span><span class="p">:</span> <span class="n">List</span><span class="p">,</span>
        <span class="n">min_score</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">page_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span>
        <span class="n">include_vector</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">select_fields</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; </span>
<span class="sd">        A more advanced chunk search to be able to combine vector search and chunk search in many different ways. \n</span>
<span class="sd">        Example 1 (Hybrid chunk search):</span>
<span class="sd">        &gt;&gt;&gt; chunk_query = {</span>
<span class="sd">        &gt;&gt;&gt;     &quot;chunk&quot; : &quot;some.test&quot;,</span>
<span class="sd">        &gt;&gt;&gt;     &quot;queries&quot; : [</span>
<span class="sd">        &gt;&gt;&gt;         {&quot;vector&quot; : vec1, &quot;fields&quot;: {&quot;some.test.some_chunkvector_&quot;:1}, </span>
<span class="sd">        &gt;&gt;&gt;         &quot;traditional_query&quot; : {&quot;text&quot;:&quot;python&quot;, &quot;fields&quot; : [&quot;some.test.test_words&quot;], &quot;traditional_weight&quot;: 0.3}, </span>
<span class="sd">        &gt;&gt;&gt;         &quot;metric&quot; : &quot;cosine&quot;},</span>
<span class="sd">        &gt;&gt;&gt;         {&quot;vector&quot; : vec, &quot;fields&quot;: [&quot;some.test.tt.some_other_chunkvector_&quot;], </span>
<span class="sd">        &gt;&gt;&gt;         &quot;traditional_query&quot; : {&quot;text&quot;:&quot;jumble&quot;, &quot;fields&quot; : [&quot;some.test.test_words&quot;], &quot;traditional_weight&quot;: 0.3}, </span>
<span class="sd">        &gt;&gt;&gt;         &quot;metric&quot; : &quot;cosine&quot;},</span>
<span class="sd">        &gt;&gt;&gt;     ]</span>
<span class="sd">        &gt;&gt;&gt; }</span>

<span class="sd">        Example 2 (combines normal vector search with chunk search):</span>
<span class="sd">        &gt;&gt;&gt; chunk_query = {</span>
<span class="sd">        &gt;&gt;&gt;     &quot;queries&quot; : [</span>
<span class="sd">        &gt;&gt;&gt;         {</span>
<span class="sd">        &gt;&gt;&gt;             &quot;queries&quot;: [</span>
<span class="sd">        &gt;&gt;&gt;                 {</span>
<span class="sd">        &gt;&gt;&gt;                     &quot;vector&quot;: vec1,</span>
<span class="sd">        &gt;&gt;&gt;                     &quot;fields&quot;: {</span>
<span class="sd">        &gt;&gt;&gt;                         &quot;some.test.some_chunkvector_&quot;: 0.9</span>
<span class="sd">        &gt;&gt;&gt;                     },</span>
<span class="sd">        &gt;&gt;&gt;                     &quot;traditional_query&quot;: {</span>
<span class="sd">        &gt;&gt;&gt;                         &quot;text&quot;: &quot;python&quot;,</span>
<span class="sd">        &gt;&gt;&gt;                         &quot;fields&quot;: [</span>
<span class="sd">        &gt;&gt;&gt;                             &quot;some.test.test_words&quot;</span>
<span class="sd">        &gt;&gt;&gt;                         ],</span>
<span class="sd">        &gt;&gt;&gt;                         &quot;traditional_weight&quot;: 0.3</span>
<span class="sd">        &gt;&gt;&gt;                     },</span>
<span class="sd">        &gt;&gt;&gt;                     &quot;metric&quot;: &quot;cosine&quot;</span>
<span class="sd">        &gt;&gt;&gt;                 }</span>
<span class="sd">        &gt;&gt;&gt;             ],</span>
<span class="sd">        &gt;&gt;&gt;             &quot;chunk&quot;: &quot;some.test&quot;,</span>
<span class="sd">        &gt;&gt;&gt;         },</span>
<span class="sd">        &gt;&gt;&gt;         {</span>
<span class="sd">        &gt;&gt;&gt;             &quot;vector&quot; : vec, </span>
<span class="sd">        &gt;&gt;&gt;             &quot;fields&quot;: {</span>
<span class="sd">        &gt;&gt;&gt;                 &quot;.some_vector_&quot; : 0.1}, </span>
<span class="sd">        &gt;&gt;&gt;                 &quot;metric&quot; : &quot;cosine&quot;</span>
<span class="sd">        &gt;&gt;&gt;                 },</span>
<span class="sd">        &gt;&gt;&gt;         ]</span>
<span class="sd">        &gt;&gt;&gt;     }</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        dataset_id : string</span>
<span class="sd">            Unique name of dataset</span>
<span class="sd">        chunk_search_query : list</span>
<span class="sd">            Advanced chunk query</span>
<span class="sd">        min_score: int</span>
<span class="sd">            Minimum score for similarity metric</span>
<span class="sd">        page_size: int</span>
<span class="sd">            Size of each page of results</span>
<span class="sd">        include_vector: bool</span>
<span class="sd">            Include vectors in the search results</span>
<span class="sd">        select_fields: list</span>
<span class="sd">            Fields to include in the search results, empty array/list means all fields.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">make_http_request</span><span class="p">(</span>
            <span class="s2">&quot;/services/search/advanced_chunk&quot;</span><span class="p">,</span>
            <span class="n">method</span><span class="o">=</span><span class="s2">&quot;POST&quot;</span><span class="p">,</span>
            <span class="n">parameters</span><span class="o">=</span><span class="p">{</span>
                <span class="s2">&quot;dataset_ids&quot;</span><span class="p">:</span> <span class="n">dataset_ids</span><span class="p">,</span>
                <span class="s2">&quot;chunk_search_query&quot;</span><span class="p">:</span> <span class="n">chunk_search_query</span><span class="p">,</span>
                <span class="s2">&quot;page_size&quot;</span><span class="p">:</span> <span class="n">page_size</span><span class="p">,</span>
                <span class="s2">&quot;min_score&quot;</span><span class="p">:</span> <span class="n">min_score</span><span class="p">,</span>
                <span class="s2">&quot;include_vector&quot;</span><span class="p">:</span> <span class="n">include_vector</span><span class="p">,</span>
                <span class="s2">&quot;select_fields&quot;</span><span class="p">:</span> <span class="n">select_fields</span><span class="p">,</span></div>
            <span class="p">}</span>
        <span class="p">)</span>

<div class="viewcode-block" id="Search.advanced_multistep_chunk"><a class="viewcode-back" href="../../../../relevanceai.api.endpoints.html#relevanceai.api.endpoints.search.Search.advanced_multistep_chunk">[docs]</a>    <span class="k">def</span> <span class="nf">advanced_multistep_chunk</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">dataset_ids</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span>
        <span class="n">first_step_query</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span>
        <span class="n">first_step_text</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">first_step_fields</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span>
        <span class="n">chunk_search_query</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span>
        <span class="n">first_step_edit_distance</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">first_step_ignore_space</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">first_step_traditional_weight</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.075</span><span class="p">,</span>
        <span class="n">first_step_approximation_depth</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">first_step_sum_fields</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">first_step_filters</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[],</span>
        <span class="n">first_step_page_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">50</span><span class="p">,</span>
        <span class="n">include_count</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">min_score</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">page_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span>
        <span class="n">include_vector</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">select_fields</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; </span>
<span class="sd">        Performs a vector hybrid search and then an advanced chunk search. Chunk Search allows one to search through chunks inside a document. The major difference between chunk search and normal search in Vector AI is that it relies on the chunkvector field. Chunk Vector Search. Search with a multiple chunkvectors for the most similar documents. Chunk search also supports filtering to only search through filtered results and facets to get the overview of products available when a minimum score is set. \n</span>

<span class="sd">        Example 1 (Hybrid chunk search):</span>

<span class="sd">        &gt;&gt;&gt; chunk_query = {</span>
<span class="sd">        &gt;&gt;&gt;     &quot;chunk&quot; : &quot;some.test&quot;,</span>
<span class="sd">        &gt;&gt;&gt;     &quot;queries&quot; : [</span>
<span class="sd">        &gt;&gt;&gt;         {&quot;vector&quot; : vec1, &quot;fields&quot;: {&quot;some.test.some_chunkvector_&quot;:1}, </span>
<span class="sd">        &gt;&gt;&gt;         &quot;traditional_query&quot; : {&quot;text&quot;:&quot;python&quot;, &quot;fields&quot; : [&quot;some.test.test_words&quot;], &quot;traditional_weight&quot;: 0.3}, </span>
<span class="sd">        &gt;&gt;&gt;         &quot;metric&quot; : &quot;cosine&quot;},</span>
<span class="sd">        &gt;&gt;&gt;         {&quot;vector&quot; : vec, &quot;fields&quot;: [&quot;some.test.tt.some_other_chunkvector_&quot;], </span>
<span class="sd">        &gt;&gt;&gt;         &quot;traditional_query&quot; : {&quot;text&quot;:&quot;jumble&quot;, &quot;fields&quot; : [&quot;some.test.test_words&quot;], &quot;traditional_weight&quot;: 0.3}, </span>
<span class="sd">        &gt;&gt;&gt;         &quot;metric&quot; : &quot;cosine&quot;},</span>
<span class="sd">        &gt;&gt;&gt;     ]</span>
<span class="sd">        &gt;&gt;&gt; }</span>

<span class="sd">        Example 2 (combines normal vector search with chunk search):</span>
<span class="sd">        &gt;&gt;&gt; chunk_query = {</span>
<span class="sd">        &gt;&gt;&gt;     &quot;queries&quot; : [</span>
<span class="sd">        &gt;&gt;&gt;         {</span>
<span class="sd">        &gt;&gt;&gt;             &quot;queries&quot;: [</span>
<span class="sd">        &gt;&gt;&gt;                 {</span>
<span class="sd">        &gt;&gt;&gt;                     &quot;vector&quot;: vec1,</span>
<span class="sd">        &gt;&gt;&gt;                     &quot;fields&quot;: {</span>
<span class="sd">        &gt;&gt;&gt;                         &quot;some.test.some_chunkvector_&quot;: 0.9</span>
<span class="sd">        &gt;&gt;&gt;                     },</span>
<span class="sd">        &gt;&gt;&gt;                     &quot;traditional_query&quot;: {</span>
<span class="sd">        &gt;&gt;&gt;                         &quot;text&quot;: &quot;python&quot;,</span>
<span class="sd">        &gt;&gt;&gt;                         &quot;fields&quot;: [</span>
<span class="sd">        &gt;&gt;&gt;                             &quot;some.test.test_words&quot;</span>
<span class="sd">        &gt;&gt;&gt;                         ],</span>
<span class="sd">        &gt;&gt;&gt;                         &quot;traditional_weight&quot;: 0.3</span>
<span class="sd">        &gt;&gt;&gt;                     },</span>
<span class="sd">        &gt;&gt;&gt;                     &quot;metric&quot;: &quot;cosine&quot;</span>
<span class="sd">        &gt;&gt;&gt;                 }</span>
<span class="sd">        &gt;&gt;&gt;             ],</span>
<span class="sd">        &gt;&gt;&gt;             &quot;chunk&quot;: &quot;some.test&quot;,</span>
<span class="sd">        &gt;&gt;&gt;         },</span>
<span class="sd">        &gt;&gt;&gt;         {</span>
<span class="sd">        &gt;&gt;&gt;             &quot;vector&quot; : vec, </span>
<span class="sd">        &gt;&gt;&gt;             &quot;fields&quot;: {</span>
<span class="sd">        &gt;&gt;&gt;                 &quot;.some_vector_&quot; : 0.1}, </span>
<span class="sd">        &gt;&gt;&gt;                 &quot;metric&quot; : &quot;cosine&quot;</span>
<span class="sd">        &gt;&gt;&gt;                 },</span>
<span class="sd">        &gt;&gt;&gt;         ]</span>
<span class="sd">        &gt;&gt;&gt;     }</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        dataset_id : string</span>
<span class="sd">            Unique name of dataset</span>
<span class="sd">        first_step_query : list</span>
<span class="sd">            First step query</span>
<span class="sd">        first_step_text : string</span>
<span class="sd">            Text search query (not encoded as vector)</span>
<span class="sd">        first_step_fields: list</span>
<span class="sd">            Text fields to search against</span>
<span class="sd">        chunk_search_query: list</span>
<span class="sd">            Advanced chunk query</span>
<span class="sd">        first_step_edit_distance: int</span>
<span class="sd">            This refers to the amount of letters it takes to reach from 1 string to another string. e.g. band vs bant is a 1 word edit distance. Use -1 if you would like this to be automated.</span>
<span class="sd">        first_step_ignore_spaces: bool</span>
<span class="sd">            Whether to consider cases when there is a space in the word. E.g. Go Pro vs GoPro.</span>
<span class="sd">        first_step_traditional_weight: int</span>
<span class="sd">            Multiplier of traditional search score. A value of 0.025~0.075 is the ideal range</span>
<span class="sd">        first_step_approximation_depth: int</span>
<span class="sd">            Used for approximate search to speed up search. The higher the number, faster the search but potentially less accurate.</span>
<span class="sd">        first_step_sum_fields : bool</span>
<span class="sd">            Whether to sum the multiple vectors similarity search score as 1 or seperate</span>
<span class="sd">        first_step_filters: list</span>
<span class="sd">            Query for filtering the search results</span>
<span class="sd">        first_step_page_size: int</span>
<span class="sd">            In the first search, you are more interested in the contents</span>
<span class="sd">        include_count: bool</span>
<span class="sd">            Include the total count of results in the search results</span>
<span class="sd">        min_score: int</span>
<span class="sd">            Minimum score for similarity metric</span>
<span class="sd">        page_size: int</span>
<span class="sd">            Size of each page of results</span>
<span class="sd">        include_vector: bool</span>
<span class="sd">            Include vectors in the search results</span>
<span class="sd">        select_fields: list</span>
<span class="sd">            Fields to include in the search results, empty array/list means all fields.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">make_http_request</span><span class="p">(</span>
            <span class="s2">&quot;/services/search/advanced_multistep_chunk&quot;</span><span class="p">,</span>
            <span class="n">method</span><span class="o">=</span><span class="s2">&quot;POST&quot;</span><span class="p">,</span>
            <span class="n">parameters</span><span class="o">=</span><span class="p">{</span>
                <span class="s2">&quot;dataset_ids&quot;</span><span class="p">:</span> <span class="n">dataset_ids</span><span class="p">,</span>
                <span class="s2">&quot;first_step_query&quot;</span><span class="p">:</span> <span class="n">first_step_query</span><span class="p">,</span>
                <span class="s2">&quot;first_step_text&quot;</span><span class="p">:</span> <span class="n">first_step_text</span><span class="p">,</span>
                <span class="s2">&quot;first_step_fields&quot;</span><span class="p">:</span> <span class="n">first_step_fields</span><span class="p">,</span>
                <span class="s2">&quot;chunk_search_query&quot;</span><span class="p">:</span> <span class="n">chunk_search_query</span><span class="p">,</span>
                <span class="s2">&quot;first_step_edit_distance&quot;</span><span class="p">:</span> <span class="n">first_step_edit_distance</span><span class="p">,</span>
                <span class="s2">&quot;first_step_ignore_space&quot;</span><span class="p">:</span> <span class="n">first_step_ignore_space</span><span class="p">,</span>
                <span class="s2">&quot;first_step_traditional_weight&quot;</span><span class="p">:</span> <span class="n">first_step_traditional_weight</span><span class="p">,</span>
                <span class="s2">&quot;first_step_approximation_depth&quot;</span><span class="p">:</span> <span class="n">first_step_approximation_depth</span><span class="p">,</span>
                <span class="s2">&quot;first_step_sum_fields&quot;</span><span class="p">:</span> <span class="n">first_step_sum_fields</span><span class="p">,</span>
                <span class="s2">&quot;first_step_filters&quot;</span><span class="p">:</span> <span class="n">first_step_filters</span><span class="p">,</span>
                <span class="s2">&quot;first_step_page_size&quot;</span><span class="p">:</span> <span class="n">first_step_page_size</span><span class="p">,</span>
                <span class="s2">&quot;include_count&quot;</span><span class="p">:</span> <span class="n">include_count</span><span class="p">,</span>
                <span class="s2">&quot;min_score&quot;</span><span class="p">:</span> <span class="n">min_score</span><span class="p">,</span>
                <span class="s2">&quot;page_size&quot;</span><span class="p">:</span> <span class="n">page_size</span><span class="p">,</span>
                <span class="s2">&quot;include_vector&quot;</span><span class="p">:</span> <span class="n">include_vector</span><span class="p">,</span>
                <span class="s2">&quot;select_fields&quot;</span><span class="p">:</span> <span class="n">select_fields</span><span class="p">,</span></div>
            <span class="p">}</span>
        <span class="p">)</span>

<div class="viewcode-block" id="Search._init_experiment_helper"><a class="viewcode-back" href="../../../../autoapi/relevanceai/api/endpoints/search/index.html#relevanceai.api.endpoints.search.Search._init_experiment_helper">[docs]</a>    <span class="k">def</span> <span class="nf">_init_experiment_helper</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">categories</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;chunk&#39;</span><span class="p">,</span> <span class="s1">&#39;vector&#39;</span><span class="p">,</span> <span class="s1">&#39;diversity&#39;</span><span class="p">,</span> <span class="s1">&#39;traditional&#39;</span><span class="p">]):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">categories</span> <span class="o">=</span> <span class="n">categories</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">traditional_search_doc</span> <span class="o">=</span> <span class="s2">&quot;https://docs.relevance.ai/docs/better-text-search-with-hybrid&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vector_search_doc</span> <span class="o">=</span> <span class="s2">&quot;https://docs.relevance.ai/docs/pure-word-matching-pure-vector-search-or-combination-of-both&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">diversity_search_doc</span> <span class="o">=</span> <span class="s2">&quot;https://docs.relevance.ai/docs/better-text-search-diversified-search-results&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hybrid_search_doc</span> <span class="o">=</span> <span class="s2">&quot;https://docs.relevance.ai/docs/pure-word-matching-pure-vector-search-or-combination-of-both-1&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">semantic_search_doc</span> <span class="o">=</span> <span class="s2">&quot;https://docs.relevance.ai/docs/pure-word-matching-pure-vector-search-or-combination-of-both-2&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">chunk_search_doc</span> <span class="o">=</span>  <span class="s2">&quot;https://docs.relevance.ai/docs/better-text-search-chunk-search&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">multistep_chunk_doc</span> <span class="o">=</span> <span class="s2">&quot;https://docs.relevance.ai/docs/fine-grained-search-search-on-chunks-of-text-data&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">advanced_chunk_doc</span> <span class="o">=</span> <span class="s2">&quot;https://docs.relevance.ai/docs/fine-grained-search-search-on-chunks-of-text-data-1&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">advanced_multistep_chunk_doc</span> <span class="o">=</span> <span class="s2">&quot;https://docs.relevance.ai/docs/fine-grained-search-search-on-chunks-of-text-data-2&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">initiative_messages</span> <span class="o">=</span> <span class="s2">&quot;What else to experiment with :)</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">category_initiative_messages</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;chunk&#39;</span><span class="p">:</span> <span class="s2">&quot;if you are searching on large pieces of text, you could chunk your data and try</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="s1">&#39;vector&#39;</span><span class="p">:</span> <span class="s2">&quot;if you are looking for strong conceptual relations and not just word matching, you could try</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="s1">&#39;diversity&#39;</span><span class="p">:</span> <span class="s2">&quot;if you are looking for strong conceptual relations as well as diverse results, you could try</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="s1">&#39;traditional&#39;</span><span class="p">:</span> <span class="s2">&quot;if you are looking for specific text such as id, names, etc., you could try</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span></div>
        <span class="p">}</span>

<div class="viewcode-block" id="Search.make_suggestion"><a class="viewcode-back" href="../../../../relevanceai.api.endpoints.html#relevanceai.api.endpoints.search.Search.make_suggestion">[docs]</a>    <span class="k">def</span> <span class="nf">make_suggestion</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_last_used_endpoint&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">last_search</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_last_used_endpoint</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">last_search</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">suggestion</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">initiative_messages</span>
        <span class="k">if</span> <span class="s1">&#39;traditional&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">categories</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_search</span> <span class="o">!=</span> <span class="s1">&#39;traditional&#39;</span><span class="p">:</span>
            <span class="n">suggestion</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">category_initiative_messages</span><span class="p">[</span><span class="s1">&#39;traditional&#39;</span><span class="p">]</span>
            <span class="n">suggestion</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;   * traditional search (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">traditional_search_doc</span><span class="si">}</span><span class="s2">)</span><span class="se">\n</span><span class="s2">&quot;</span>

        <span class="k">if</span> <span class="s1">&#39;vector&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">categories</span><span class="p">:</span>
            <span class="n">suggestion</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">category_initiative_messages</span><span class="p">[</span><span class="s1">&#39;vector&#39;</span><span class="p">]</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_search</span> <span class="o">!=</span> <span class="s2">&quot;vector&quot;</span><span class="p">:</span>
                 <span class="n">suggestion</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;   * vector search (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">vector_search_doc</span><span class="si">}</span><span class="s2">)</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_search</span> <span class="o">!=</span> <span class="s2">&quot;hybrid&quot;</span><span class="p">:</span>
                 <span class="n">suggestion</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;   * hybrid search (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">hybrid_search_doc</span><span class="si">}</span><span class="s2">)</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_search</span> <span class="o">!=</span> <span class="s2">&quot;semantic&quot;</span><span class="p">:</span>
                 <span class="n">suggestion</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;   * semantic search (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">semantic_search_doc</span><span class="si">}</span><span class="s2">)</span><span class="se">\n</span><span class="s2">&quot;</span>

        <span class="k">if</span> <span class="s1">&#39;diversity&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">categories</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_search</span> <span class="o">!=</span> <span class="s1">&#39;diversity&#39;</span><span class="p">:</span>
            <span class="n">suggestion</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">category_initiative_messages</span><span class="p">[</span><span class="s1">&#39;diversity&#39;</span><span class="p">]</span>
            <span class="n">suggestion</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;   * diversity search (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">diversity_search_doc</span><span class="si">}</span><span class="s2">)</span><span class="se">\n</span><span class="s2">&quot;</span>

        <span class="k">if</span> <span class="s1">&#39;chunk&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">categories</span><span class="p">:</span>
          <span class="n">suggestion</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">category_initiative_messages</span><span class="p">[</span><span class="s1">&#39;chunk&#39;</span><span class="p">]</span>
          <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_search</span> <span class="o">!=</span> <span class="s2">&quot;chunk&quot;</span><span class="p">:</span>
              <span class="n">suggestion</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;   * chunk search (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">chunk_search_doc</span><span class="si">}</span><span class="s2">)</span><span class="se">\n</span><span class="s2">&quot;</span>
          <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_search</span> <span class="o">!=</span> <span class="s2">&quot;multistep_chunk&quot;</span><span class="p">:</span>
              <span class="n">suggestion</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;   * multistep_chunk search (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">multistep_chunk_doc</span><span class="si">}</span><span class="s2">)</span><span class="se">\n</span><span class="s2">&quot;</span>
          <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_search</span> <span class="o">!=</span> <span class="s2">&quot;advanced_chunk&quot;</span><span class="p">:</span>
              <span class="n">suggestion</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;   * advanced_chunk search (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">advanced_chunk_doc</span><span class="si">}</span><span class="s2">)</span><span class="se">\n</span><span class="s2">&quot;</span>
          <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_search</span> <span class="o">!=</span> <span class="s2">&quot;advanced_multistep_chunk&quot;</span><span class="p">:</span>
              <span class="n">suggestion</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;   * advanced_multistep_chunk search (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">advanced_multistep_chunk_doc</span><span class="si">}</span><span class="s2">)</span><span class="se">\n</span><span class="s2">&quot;</span>

        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;search&quot;</span><span class="p">:</span><span class="n">suggestion</span><span class="p">}</span></div></div>
</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, Relevance AI.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>